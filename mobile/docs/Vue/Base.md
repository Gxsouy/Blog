# `Vue` - `Base`

> `Vue`æ˜¯ä¸€å¥—æ„å»ºç”¨æˆ·ç•Œé¢çš„æ¸è¿›å¼`JavaScript`æ¡†æ¶ã€‚
>
> `Vue`åªå…³æ³¨è§†å›¾å±‚ï¼Œé‡‡ç”¨è‡ªåº•å‘ä¸Šå¢é‡å¼€å‘çš„è®¾è®¡ã€‚

**åœ¨è®¡ç®—æœºç§‘å­¦ä¸­åªæœ‰ä¸¤ä»¶å›°éš¾çš„äº‹æƒ…ï¼š ç¼“å­˜å¤±æ•ˆ å’Œ å‘½åè§„èŒƒã€‚**

- **`truthy`**

  åªæœ‰`false / 0 / '' / null / undefined / NaN`æ‰ä¼šé»˜è®¤è½¬æˆ`false`, å…¶ä½™éƒ½æ˜¯`truthy`å€¼ã€‚

## å•æ–‡ä»¶ç»„ä»¶

**ä¼˜ç‚¹ï¼šğŸ‘‡**

- **æä¾›äº†æ›´å¥½çš„å°è£…æ€§ã€‚**
- **ä¼˜é›…çš„æ¨¡æ¿æ”¯æŒã€‚**
- **`scoped Css` æ”¯æŒã€‚**
- **é€šè¿‡`vue-loader`å¯ä»¥é…åˆ å„ç§ é¢„å¤„ç†å™¨ è¿›è¡Œæ„å»ºã€‚**

## å‘½åè§„åˆ™

**`camelCase / PascalCase / kabab-case`**

- **`camelCase`** - å°é©¼å³°

  `e.g: videoExampleComponent`

  **`Js`å‡½æ•° / å˜é‡ / `props` / `data(Vue)` ç­‰~**

  > `props: { bigProp: String }` / `data: { nikeName: 'xxx' }`

- **`PascalCase`** - å¤§é©¼å³°

  `e.g: VideoExampleComponent`

  **`Js`ç±» / æ„é€ å‡½æ•° / é¡¹ç›®çš„ç»„ä»¶æ–‡ä»¶ã€‚**

  > `components/(æ–‡ä»¶å¤¹ä¸‹)` - `VideoItem.vue`

- **`kabab-case`**

  `e.g: video-example-component`

  **`Html` - å› ä¸º`Html`ä¸­æ˜¯å¤§å°å†™ä¸æ•æ„Ÿçš„ã€‚**

  > `Vue.component('video-item', {})` /
  >
  > `<video-item :big-prop="1"/> `ä¸­çš„æ ‡ç­¾`<video-item>`å’Œå±æ€§`big-prop`è§„èŒƒæ¥è®²æ—¶è¿™ä¹ˆä¼ é€’çš„ã€‚

## æ¨¡æ¿

### æ¨¡æ¿è¯­æ³•

- `Vue.js`çš„æ¨¡æ¿éƒ½æ˜¯ åˆæ³•çš„ `HTML`ã€‚

- `{{}}` - æ–‡æœ¬æ’å€¼
- `v-once` - ä¸€æ¬¡æ€§æ’å€¼ï¼ˆè¯·ç•™æ„å¯èƒ½ä¼šå½±å“åˆ°å…¶ä»–æ•°æ®çš„ç»‘å®šï¼‰
- `v-html` - æ’å…¥åŸå§‹`Html`ï¼ˆæ˜“å¯¼è‡´`Xss`æ”»å‡»ï¼Œç»ä¸è¦å¯¹`UGC`ï¼ˆç”¨æˆ·æ›´æ–°çš„ä¸€äº›ä¸œè¥¿ï¼‰ å†…å®¹ä½¿ç”¨ï¼‰

### æŒ‡ä»¤

**æŒ‡ä»¤æ˜¯å¸¦æœ‰`v-`å‰ç¼€çš„ç‰¹æ®Šç‰¹æ€§**

- **`v-bind:(:)`**
- **`v-on:(@)`**

---

- **`v-if / v-else-if / v-else`**
- **`v-show`**

åŒºåˆ«ï¼š

**`v-if`** æ˜¯"çœŸæ­£"çš„æ¡ä»¶æ¸²æŸ“ï¼Œåœ¨åˆ‡æ¢è¿‡ç¨‹ä¸­æ¡ä»¶å—å†…çš„ **äº‹ä»¶ç›‘å¬å™¨å’Œå­ç»„ä»¶ä¼šè¢« é€‚å½“çš„é”€æ¯å’Œé‡å»ºã€‚**

**`v-if` æ˜¯ æƒ°æ€§ çš„ï¼Œç›´åˆ°æ¡ä»¶ç¬¬ä¸€æ¬¡å˜ä¸ºçœŸæ—¶ï¼Œæ‰ä¼šå¼€å§‹æ¸²æŸ“æ¡ä»¶å—ã€‚**

> å°±æ˜¯ å¦‚æœæˆ‘åªå†™äº†ä¸€ä¸ª `v-if` åªè¦æ¡ä»¶ä¸º `true` æ—¶ï¼Œæ‰ä¼šå¼€å§‹æ¸²æŸ“ï¼Œä¸ç„¶ä¸ä¼šè§¦å‘ã€‚

**`v-show`** æ˜¯ **å…ƒç´ å§‹ç»ˆéƒ½ä¼šè¢«æ¸²æŸ“å¹¶ä¿ç•™åœ¨`DOM`ä¸­ã€‚**

**`v-show`åªæ˜¯ç®€å•åœ°åˆ‡æ¢å…ƒç´ çš„`Css`å±æ€§`display`ã€‚**

---

- **`v-for`**

**`:key` - å°±æ˜¯æ›´é«˜çš„æé«˜æ¸²æŸ“æ•ˆç‡ï¼Œæ›´å¥½çš„æ‰§è¡Œ`diffpatch`ã€‚**

---

âš ï¸âš ï¸âš ï¸

> **ä¸æ¨è`v-for`å’Œ`v-if`åœ¨ åŒä¸€å…ƒç´ ã€‚å¦‚æœéè¦ç”¨ï¼Œ`v-for`çš„ä¼˜å…ˆçº§é«˜äº`v-if`ã€‚**
>
> **å¦‚æœåœ¨`dom`ç»“æ„ä¸­`for-if`åŒæ—¶å‡ºç°çš„è¯ã€‚åœ¨`Js`ä¸­ï¼Œæœ‰ä¸¤ç§æƒ…å†µï¼š**
>
> **`for() { if() {} }` / `if() { for() {} }`**
>
> **åœ¨`Vue`çš„`Dom`ä¸­çº¦å®šï¼Œä¸º `for` åŒ…è£¹ç€`if`çš„å½¢å¼ã€‚**

- **`ref`**

**ç›´æ¥è®¿é—®å­ç»„ä»¶æˆ–è€…æ¨¡æ¿ä¸Šçš„`DOM`èŠ‚ç‚¹æ—¶ä½¿ç”¨ã€‚**

**è°ƒç”¨ï¼š `this.$refs.refName['DOMé‡Œé¢çš„ æ–¹æ³•/å±æ€§']`**

**ğŸ“ğŸ“ æ˜¯åœ¨ æ¨¡æ¿æ¸²æŸ“åï¼Œæ‰å¯ä»¥è·å–åˆ°çš„~**

- **`JSX` - `render`å‡½æ•°**

  - æ¡ä»¶æ¸²æŸ“ã€‚

    ```js
    { // æ¡ä»¶æ¸²æŸ“
      render() {
        if (this.user.age > 18) {
          return <div>Welcome, { this.user.name }</div>
        }
        return <div>No Log</div>
      }
    }
    ```

  - åˆ—è¡¨æ¸²æŸ“ã€‚

    ```jsx
    { // åˆ—è¡¨æ¸²æŸ“
      data() {
        return {
          classmates: [
            { id: '1', name: 'xxx' }
          ]
        }
      },
      render() { // åˆ—è¡¨æ¸²æŸ“
        return (
          <div class="hello">
            {
              this.classmates.map((p, index) => (
                <div key={p.id}>{`${index}.${p.name}`}</div>
         			))
    				},
    			</div>
        );
    	}
    }
    ```

## æ•°æ®

### `Prop & Data`

**`Vue`æ˜¯ å•å‘æ•°æ®æµã€‚**

- **`Data` ä¸ºä»€ä¹ˆæ˜¯å‡½æ•°ï¼Ÿ**

  - **å› ä¸ºåªæœ‰è¿”å›ä¸€ä¸ª ç”Ÿäº§`data`çš„å‡½æ•°ã€‚**

  - **è¿™ä¸ªç»„ä»¶äº§ç”Ÿçš„æ¯ä¸€ä¸ªå®ä¾‹æ‰èƒ½ç»´æŒä¸€ä»½è¢«è¿”å›å¯¹è±¡çš„ç‹¬ç«‹æ‹·è´ã€‚**

    > **å¦‚æœæ˜¯å¯¹è±¡çš„è¯ï¼Œä»–ä»¬å¯èƒ½ä¼šå¼•ç”¨åˆ°åŒä¸€ä¸ªå¯¹è±¡, æ•°æ®å¯èƒ½ä¼šå‘ç”Ÿ ç´Šä¹±ã€‚âš ï¸âš ï¸âš ï¸**

- **`Prop`**

  **å­ç»„ä»¶æ˜¯ä¸æ¨è ç›´æ¥ä¿®æ”¹çˆ¶ç»„ä»¶ çš„ã€‚ (å› ä¸ºå¦‚æœå±‚çº§åµŒå¥—å¾ˆå¤šçš„è¯ï¼Œä¸å®¹æ˜“å®šä½é—®é¢˜~)**

  **`Prop`å±æ€§æ ¡éªŒ**

  - **`type`**

    1. ç±»å‹æ£€æŸ¥ï¼Œ`value`ä¸º å¯¹åº”ç±»å‹çš„æ„é€ å‡½æ•°ã€‚
    2. `null`å’Œ`undefined`ä¼šé€šè¿‡ä»»ä½•ç±»å‹éªŒè¯ã€‚
    3. å¤šç§ç±»å‹ä¼ å…¥æ•°ç»„`[String, Array]`

  - **`requried`**

    æ˜¯å¦å¿…å¡«ã€‚

  - **`default`**

    é»˜è®¤å€¼ï¼Œé»˜è®¤å€¼ä¸ºå¯¹è±¡æˆ–è€…æ•°ç»„çš„é»˜è®¤å€¼ï¼Œå¿…é¡»ä» ä¸€ä¸ªå·¥å‚å‡½æ•°è·å–ã€‚

  - **`validator`**

    è‡ªå®šä¹‰æ ¡éªŒå‡½æ•°ï¼Œè¿”å›`true`ä¸ºé€šè¿‡ï¼Œ`false`ä¸ºä¸é€šè¿‡ã€‚

### è®¡ç®—å±æ€§å’Œä¾¦å¬å™¨

- **`computed` - è®¡ç®—å±æ€§ ğŸ“ğŸ“**

  è®¡ç®—å±æ€§æ˜¯**åŸºäºå†…éƒ¨çš„å“åº”å¼ä¾èµ–è¿›è¡Œç¼“å­˜çš„ã€‚**

  **åªåœ¨ç›¸å…³å“åº”å¼ä¾èµ–å‘ç”Ÿæ”¹å˜æ—¶ï¼Œä»–ä»¬æ‰ä¼šé‡æ–°æ±‚å€¼ï¼ˆæ›´æ–°å€¼ï¼‰ã€‚**

  - **å¦‚æœæˆ‘ä»¬å¸Œæœ›åœ¨æ¨¡æ¿ä¸­ä½¿ç”¨å¸¸é‡å†…å®¹ï¼Œåˆä¸å¸Œæœ›è¢«`data`ä½œä¸ºå“åº”å¼ä¾èµ–æ”¶é›†ã€‚**
  - **åˆ©ç”¨`computed`çš„ç¼“å­˜ç‰¹æ€§ï¼Œå°†å…¶æ”¾ç½®åœ¨`computed`é‡Œã€‚**

  > **å¦‚æœè®¡ç®—æ—¶é—´ æ¯”è¾ƒé•¿ï¼Œæˆ–è€…æ•°æ®é‡è¿‡å¤§çš„æ—¶å€™ï¼Œæ”¾åœ¨`computed`é‡Œ å¯èƒ½ä¼šé˜»å¡æ¸²æŸ“ï¼Œæ‰€ä»¥ï¼Œå°†å…¶ æ”¾ç½®åœ¨`watch`é‡Œé¢ æ˜¯æ¯”è¾ƒå¥½çš„ä¸€ä¸ªé€‰æ‹©ã€‚**

- **`watch` - ä¾¦å¬å™¨ ğŸ“ğŸ“**

  **åœ¨æ•°æ®å˜åŒ–åï¼Œæ‰§è¡Œ å¼‚æ­¥æ“ä½œ æˆ–è€… å¼€é”€è¾ƒå¤§çš„æ“ä½œã€‚**

- **`methods` - æ–¹æ³• ğŸ“ğŸ“**

  **æ— ç¼“å­˜ã€‚**

  **æ¯å½“è§¦å‘é‡æ–°æ¸²æŸ“ï¼Œè°ƒç”¨æ–¹æ³•å°†é‡æ–°å†æ¬¡æ‰§è¡Œå‡½æ•°ã€‚**

### æ•°ç»„æ“ä½œ

> è¿™æ · æ“ä½œæ•°æ® æ— ååº”ã€‚ğŸ‘‡

```js
{
  data() {
    return {
      classList: [
        { id: 1, name: 'xxx' },
      ],
    }
  },
  methods: {
    change() {
      this.classmates[2] = { id: 3, name: 'x123' };
    },
  }
}
```

- **`Object.defineProperty`**
  - **ä¸èƒ½æ£€æµ‹ å¯¹è±¡ å±æ€§çš„ æ·»åŠ  æˆ–è€… åˆ é™¤ã€‚**
  - **ä¸èƒ½æ£€æµ‹ æ•°ç»„é•¿åº¦å˜åŒ– (é€šè¿‡æ”¹å˜`length`è€Œå¢åŠ çš„é•¿åº¦ä¸èƒ½ç›‘æµ‹åˆ°ã€‚)**

`Vue` - **ä¸æ˜¯å› ä¸º`defineProperty`çš„å±€é™æ€§ï¼Œ è€Œæ˜¯å¤„äºæ€§èƒ½è€ƒé‡çš„ï¼Œä¸ä¼šå¯¹æ•°ç»„çš„æ¯ä¸ªå…ƒç´ éƒ½ç›‘å¬ã€‚**

**è§£å†³ï¼šğŸŒŠğŸŒŠ**

1. **`Vue.set | this.$set`( å°† å±æ€§æ·»åŠ  é…ç½®åˆ° å“åº”å¼ ä¾èµ–ä¸­ )**

   **`vue.delete | this.$delete`( åœ¨ å“åº”å¼ä¾èµ–ä¸­ åˆ é™¤ å±æ€§ )**

2. **å¯¹ æ•°ç»„ çš„ä¸€äº›æ–¹æ³• è¿›è¡Œäº† ä»£ç†å°è£…ã€‚**

   **`push() / pop() / shift() / unshift() / splice() / sort() / reverse()`**

   ä»¥ä¸Šè¿™äº›æ–¹æ³• ğŸ‘† éƒ½å¯ä»¥åœ¨æ•°ç»„æ“ä½œçš„æ—¶å€™ è¢«ç›‘å¬åˆ°ã€‚

## äº‹ä»¶&æ ·å¼

**äº‹ä»¶( äº‹ä»¶ä¿®é¥°ç¬¦ ) / åŒå‘ç»‘å®š / æ ·å¼**

### äº‹ä»¶

- `v-on:click (@click)`

  ```html
  <button @click="add"></button> <button @click="add2($event, num)"></button>
  ```

  ```js
  {
    methods: {
      add(event) {
        // å¦‚æœä¸ä¼ é€’å‚æ•° é»˜è®¤å‚æ•°å°±æ˜¯ event åŸç”Ÿäº‹ä»¶
        event instanceof MouseEvent
        // true
        `${ this } åœ¨æ–¹æ³•é‡ŒæŒ‡å‘çš„æ˜¯å½“å‰ Vue å®ä¾‹`
      },
      add2(event, num) {
        // å¦‚æœä¼ é€’å‚æ•° å°±æ˜¯ $event æ¥è¯†åˆ« æ˜¯å¦ä¼ é€’çš„æ˜¯ åŸç”Ÿäº‹ä»¶
        event // å°±æ˜¯åŸç”Ÿ DOM äº‹ä»¶
      },
    }
  }
  ```

### äº‹ä»¶ä¿®é¥°ç¬¦

**ä¸ºäº†ä¿è¯`methods`æ–¹æ³•åªæœ‰çº¯ç²¹çš„æ•°æ®é€»è¾‘ï¼Œ(å’Œ`DOM`è§£è€¦ï¼Œæ˜“äº å•å…ƒæµ‹è¯•)ï¼Œä¸å»åš`DOM`ç›¸å…³çš„å¤„ç†æ“ä½œã€‚**

| **`.stop`**                                    | **é˜»æ­¢ å•å‡»äº‹ä»¶ ç»§ç»­ä¼ æ’­**                                                                                          |
| ---------------------------------------------- | ------------------------------------------------------------------------------------------------------------------- |
| **`submit.prevent`**                           | **æäº¤äº‹ä»¶ä¸å†é‡è½½é¡µé¢(å¯¹äº`form`æ ‡ç­¾)**                                                                            |
| **`.stop.prevent`**                            | **ä¿®é¥°ç¬¦å¯ä»¥ä¸²è” (å¯¹äº`a`æ ‡ç­¾ï¼Œ å°±æ˜¯ä¸ä¼šå¯¹é¡µé¢è¿›è¡Œè·³è½¬äº†)**                                                         |
| **`submit.prevent`**                           | **ä¹Ÿå¯ä»¥åªæœ‰ ä¿®é¥°ç¬¦ æ²¡æœ‰æ–¹æ³•**                                                                                      |
| **`.capture`**                                 | **æ·»åŠ äº‹ä»¶ç›‘å¬å™¨æ—¶ï¼Œä½¿ç”¨äº‹ä»¶æ•è·æ¨¡å¼<br />(å³ å†…éƒ¨å…ƒç´ è§¦å‘çš„äº‹ä»¶å…ˆåœ¨æ­¤å¤„ç†ï¼Œ ç„¶åæ‰äº¤ç”± å†…éƒ¨å…ƒç´ è¿›è¡Œå¤„ç†~)**        |
| **`.self`**                                    | **åªæœ‰å½“`event.target`æ—¶å½“å‰å…ƒç´ è‡ªèº«æ—¶æ‰è§¦å‘å¤„ç†å‡½æ•° <br />(å³ äº‹ä»¶ä¸æ˜¯ä»å†…éƒ¨å…ƒç´ è§¦å‘å†’æ³¡ä¸Šæ¥çš„ï¼Œå°±ä¸ä¼šå¤„ç†~)**     |
| **`.once`**                                    | **ç‚¹å‡»çš„äº‹ä»¶ï¼Œåªä¼šè§¦å‘ä¸€æ¬¡**                                                                                        |
| **`scroll.passive`**                           | **æ»šåŠ¨äº‹ä»¶çš„é»˜è®¤è¡Œä¸º(å³æ»šåŠ¨è¡Œä¸º) å°†ä¼šç«‹å³è§¦å‘ï¼Œä¸ç­‰å¾…`onScroll`å®Œæˆ<br />(å…¶ä¸­åŒ…å«`event.preventDefault()`çš„æƒ…å†µ)** |
| **`keyup.enter / keyup.page-down / keyup.13`** | **åªæœ‰åœ¨`key`æ˜¯`Enter`æ—¶ è°ƒç”¨äº‹ä»¶**                                                                                 |
| **`keyup.alt.67`**                             | **`Alt + C`**                                                                                                       |
| **`@click+ctrl`**                              | **å•å‡» + `ctrl` (å³ä½¿`alt + shift`ä¸€åŒæŒ‰ä¸‹æ—¶ï¼Œä¹Ÿä¼šè§¦å‘)**                                                           |

### è‡ªå®šä¹‰äº‹ä»¶

**å•å‘æ•°æ®æµ ( çˆ¶ä¼ å­ -> `props` )**

**åŒå‘ç»‘å®š (å­ä¼ çˆ¶ -> `$emit`) ğŸ“ğŸ“**

```jsx
<child-dom @update:msg="msg = $event"></child-dom>
<button @click="$emit('update:msg', 'hi')"></button>
// update:msg éœ€è¦å£°æ˜msg - (:msg)

// ä¸ºäº†æ–¹ä¾¿è¿™æ ·ä¸€ç§æ¨¡å¼ï¼Œå­ ä¿®æ”¹ çˆ¶
// è¿™æ ·å°± è¦æ±‚ äº‹ä»¶åç§°éœ€è¦ äº‹ä»¶ :prop ä¼ é€’è¿›æ¥çš„ key å€¼
<child-dom :msg.sync="msg"></child-dom>
```

### æ ·å¼

- `:class`
- `:style` - å¯ä»¥ç”¨é©¼å³° æˆ–è€… ä¸²å¼ - `border-color / borderColor`ã€‚

**å¯ä»¥ä½¿ç”¨`BEM`çš„å‘½åæ–¹å¼ï¼Œæ¥è§£å†³ å‘½åæ–¹å¼æ±¡æŸ“çš„ é—®é¢˜~ ğŸ“ğŸ“ğŸ“~**

**`scoped`é€šè¿‡`vue-loader`è¿›è¡Œäº†ä¸€å±‚`hash`å°è£…ï¼Œæ¥åŒºåˆ†ä¸åŒçš„å•æ–‡ä»¶ç»„ä»¶ã€‚**

```html
<div data-v-154asdad class="test"></div>
.test[data-v-154asdad] {}
```

---

å…«çš‡å - è®°å½•

```jsx
// æ ·å¼ & æ„æˆ
çˆ¶çº§ { float: left }
å­çº§ { display: flow-root } // æ¸…é™¤æµ®åŠ¨ï¼Ÿ

// ğŸ‘‡è¿™æ ·å°± å½¼æ­¤ä¸ç›¸é‚»çš„æ ¼å­ å½¢æˆäº†åˆ— (å¥‡æ•°è¡Œ å¶æ•°è¡Œ å„è‡ªä¸€ä¸ªé¢œè‰²)
.row:nth-child(2n) .cell:nth-child(2n) { background: #999; }
.row:nth-child(2n) .cell:nth-child(2n - 1) { background: #efefef; }

<div v-for="(item, rindex) in grids"></div>
<div v-for="(cell, cindex) in grids" @click="select(rindex, cindex)"></div>
{
  select: function(rindex, cindex) {
    this.grids[rindex][cindex].ok = true;
  }
}
```

```js
// å…«çš‡åé€»è¾‘
const grids = new Array(8).fill(1).map((_, r) => {
  return new Array(8).fill(1).map((_, c) => {
    return {
      key: `key-${r * 8 + c}`,
      ok: false,
    };
  });
});

export default {
  data() {
    return {
      grids,
    };
  },
  methods: {
    select(rindex, cindex) {
      if (this.validate(rindex, cindex)) {
        this.grids[rindex][cindex].ok = !this.grids[rindex][cindex].ok;
      } else {
        alert("å½“å‰ä½ç½®ä¸èƒ½æ”¾ç½®çš‡å");
      }
    },
    validate(rindex, cindex) {
      // æ¨ª
      for (let i = 0; i < this.grids[rindex].length; i++) {
        if (this.grids[rindex][i].ok) {
          return false;
        }
      }

      // ç«–
      for (let i = 0; i < this.grids.length; i++) {
        if (this.grids[i][cindex].ok) {
          return false;
        }
      }

      // æ’‡
      for (let i = 0; i < this.grids[0].length; i++) {
        let y = rindex + cindex - i;
        if (y >= 0 && y < this.grids.length && this.grids[y][i].ok) {
          return false;
        }
      }

      // æº
      for (let i = 0; i < this.grids[0].length; i++) {
        let y = rindex - cindex + i;
        if (y >= 0 && y < this.grids.length && this.grids[y][i].ok) {
          return false;
        }
      }

      return true;
    },
  },
};
```
