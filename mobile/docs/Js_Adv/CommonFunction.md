# `Js_Adv` - å¸¸ç”¨å‡½æ•°

> `Js`çš„ä¸€äº›å¸¸ç”¨å‡½æ•°è¯´æ˜ï¼Œç»„åˆå‡½æ•°`compose` / é«˜é˜¶å‡½æ•° / é˜²æŠ–èŠ‚æµ / æŸ¯é‡ŒåŒ– ç­‰ç­‰ã€‚

## `compose` & `pipe`

### å°†éœ€è¦ åµŒå¥—æ‰§è¡Œ çš„å‡½æ•°å¹³é“ºã€‚

### `compose`

åµŒå¥—æ‰§è¡Œ æŒ‡çš„æ˜¯ï¼Œ**ä¸€ä¸ªå‡½æ•°çš„è¿”å›å€¼ å°†ä½œä¸º å¦å¤–ä¸€ä¸ªå‡½æ•°çš„å‚æ•°ã€‚**

**å°†å‡ ä¸ªæœ‰ç‰¹ç‚¹çš„å‡½æ•° æ‹¼å‡‘åœ¨ä¸€èµ·ï¼Œåˆæˆä¸€ä¸ªå´­æ–°çš„å‡½æ•°ã€‚**

> å®ç°å‡½æ•°å¼ç¼–ç¨‹ä¸­çš„`Pointfree`ï¼Œä½¿æˆ‘ä»¬ä¸“æ³¨äºè½¬æ¢è€Œä¸æ˜¯æ•°æ®ã€‚

```js
// å…¸å‹çš„å‘½ä»¤å¼ç¼–ç¨‹
let calculate = (x) => (x + 10) * 10;
console.log(calculate(10));
```

```js
// æ”¹è¿› - å…³æ³¨åŠ¨ä½œ + *
let add = (x) => x + 10;
let multiply = (y) => y * 10;
console.log(multiply(add(10)));
```

```js
// æ ¹æ® å¤åˆå‡½æ•° çš„å®šä¹‰ï¼Œæˆ‘ä»¬éœ€è¦å°†ä¸Šè¿°ä¸¤ä¸ªå‡½æ•° åˆæˆ ä¸€ä¸ªå‡½æ•°
let compose = (f, g) => {
  // é—­åŒ…
  return function (x) {
    return f(g(x));
  };
};
let calculate1 = compose(multiply, add); // ä»å³å¾€å·¦ğŸ“çš„æ‰§è¡Œé¡ºåºï¼Œaddå…ˆ multiplyåã€‚
console.log(calculate1(10));
```

```js
// ğŸ“ å¤åˆå‡½æ•° æ‰§è¡Œçš„é¡ºåº æ˜¯ è‡ªå³å‘å·¦ ä¾æ¬¡æ‰§è¡Œ
let compose1 = function() {
  let args = [].slice.call(arguments);
  return function(x) {
    // reduce - ä»å·¦å¾€å³æ‰§è¡Œ  reduceRight - ä»å³å¾€å·¦æ‰§è¡Œ
    return args.reduceRight(function(res, cb) => {
                            return cb(res);
					 									}, x)
}
}
let calculate2 = compose1(multiply, add); // ä¼ é€’å‚æ•° ä¾æ—§æ˜¯ä»å·¦å¾€å³ä¼ âš ï¸âš ï¸æ‰§è¡Œæ˜¯ ä»å³å¾€å·¦æ‰§è¡Œâš ï¸âš ï¸âš ï¸
```

```js
// es6å†™æ³•
let add = (x) => x + 10;
let multiply = (y) => y * 10;
const calculate3 =
  (...args) =>
  (x) =>
    args.reduceRight((res, cb) => cb(res), x);
let fn = calculate3(add, multiply);
fn(2); // 30
```

- **`compose` å¯ä»¥è®¾è®¡ å’Œ å¤ç”¨å‡½æ•°é€»è¾‘**

- **`compose`çš„å­˜åœ¨ ä¸€èˆ¬æ˜¯æœåŠ¡äºä¸­é—´ä»¶çš„**

  `redux`ä¸­é—´ä»¶ å°±æ˜¯é€šè¿‡`compose`å®ç°çš„ã€‚

  `webpack loader` ä¹Ÿæ˜¯ä»å³å¾€å·¦ æ‰§è¡Œï¼Œä¹Ÿæ˜¯ é€‰æ‹©äº†`compose`æ¥å®ç°çš„ã€‚

### `pipe`

å‡½æ•°ç»„åˆï¼Œ**ç»„åˆæ˜¯ å‡½æ•°å¼ç¼–ç¨‹ä¸­ éå¸¸é‡è¦ çš„æ€æƒ³ï¼Œå°±æ˜¯å°† å¤šä¸ªå‡½æ•°ç»„åˆåœ¨ä¸€èµ· ï¼Œä»¥ä¾¿èƒ½å½¢æˆä¸€ä¸ª æ–°å‡½æ•°ã€‚**

**å‡½æ•°å¼ç¼–ç¨‹ä¸­ï¼Œçº¯å‡½æ•° æ˜¯ åªåšä¸€ä»¶äº‹ï¼Œ å®ç°å¤šä¸ªåŠŸèƒ½ï¼Œå°±åˆ©ç”¨å‡½æ•°ç»„åˆ æ¥å®ç°ã€‚ğŸ“ğŸ“ğŸ“**

- **`pipe` æ˜¯ `compose` å‡½æ•°çš„å¤åˆ¶å“ï¼Œ å”¯ä¸€ä¿®æ”¹çš„å°±æ˜¯ æ•°æ®æµæ–¹å‘ã€‚**

- **`pipe`æ˜¯ä»å‚æ•°å·¦å¾€å³ä¼ é€’ï¼Œæ‰§è¡Œæ˜¯ä»å·¦å¾€å³æ‰§è¡Œ**

```js
let add = (x) => x + 10;
let multiply = (y) => y * 10;
const pipe =
  (...args) =>
  (x) =>
    args.reduce((res, cb) => cb(res), x);
let fn = pipe(add, multiply);
fn(2); // 120
```

## é«˜é˜¶å‡½æ•°

**`Js`ä¸­çš„å‡½æ•°éƒ½æ˜¯ æŒ‡å‘æŸä¸ªå˜é‡ï¼Œå‡½æ•°çš„å‚æ•°åˆå¯ä»¥æ¥æ”¶æŸä¸ªå˜é‡ï¼Œ æ‰€ä»¥å¯ä»¥æ¥æ”¶å¦ä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°ã€‚è¿™ç§å‡½æ•°å°±å«é«˜é˜¶å‡½æ•°ã€‚**

> å‡½æ•° æ—¢å¯ä»¥è¢«å½“ä½œå‚æ•°ï¼Œåˆå¯ä»¥è¢«å½“ä½œ è¾“å‡ºå€¼ã€‚
>
> é«˜é˜¶å‡½æ•° æ˜¯å¯¹å…¶ä»–å‡½æ•°è¿›è¡Œæ“ä½œçš„å‡½æ•°ï¼Œå¯ä»¥å°†ä»–ä»¬ä½œä¸ºå‚æ•° æˆ–è¿”å› å®ƒä»¬ã€‚

**é«˜é˜¶å‡½æ•°æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œä»–æ¥æ”¶ å‡½æ•°ä½œä¸ºå‚æ•° æˆ–è€…å°† å‡½æ•°ä½œä¸ºè¾“å‡º è¿”å›ã€‚**

### `map / reduce / filter`

- **`map`éœ€æ±‚ï¼šåˆ›å»ºä¸€ä¸ªæ–°æ•°ç»„ï¼Œ å…¶ä¸­çš„å€¼æ˜¯åŸæ•°ç»„å€¼çš„ä¸¤å€ã€‚**

```js
const arr1 = [1, 2, 3, 3];
```

```js
// for
const arr2 = [];
for (let i = 0; i < arr1.length; i++) {
  arr2.push(arr1[i] * 2);
}
console.log(arr2);
```

```js
// map
const arr3 = arr1.map((item) => item * 2);
console.log(arr3);
```

- **`reduce`éœ€æ±‚ï¼šå¯¹æ•°ç»„å®ç°æ±‚å’Œ**

```js
let sum = arr1.reduce((prev, cur) => {
  return prev + cur;
}, 0);
console.log(sum);
```

- **`reduce`éœ€æ±‚ï¼šæ•°ç»„å»é‡**

```js
let newArr = arr1.reduce((prev, cur) => {
  prev.indexOf(cur) === -1 && prev.push(cur);
  return prev;
}, []);
console.log(newArr);
```

**`filter` - å¯¹æ•°ç»„è¿›è¡Œè¿‡æ»¤å’Œç­›é€‰ï¼Œè¿”å›æ–°æ•°ç»„ã€‚**

### `flat`

**æ•°ç»„æ‰å¹³åŒ–ï¼Œè¯¥æ–¹æ³•ä¼šè¿”å›ä¸€ä¸ªæ–°æ•°ç»„ï¼Œå¯¹åŸæ•°ç»„æ²¡æœ‰å½±å“ã€‚ğŸ“ğŸ“ğŸ“**

```js
let arr = [1, 2, 3, [5, 6]];
let arr6 = arr.flat(); // flat é»˜è®¤æ•°å€¼ä¸º1
console.log(arr6); // [ 1, 2, 3, 5, 6 ]

let arr7 = [1, 2, 3, [5, 6, [7, 8]]].flat(2);
console.log(arr7); // [ 1, 2, 3, 5, 6, 7, 8]

let arr = [1, 2, 3, 4, [5, 6, [7, 8, [9, 10, [11, 12, [13, 14]]]]]];
let arr1 = arr.flat(Infinity);
console.log(arr1);
// âš ï¸ å¦‚æœæˆ‘ä»¬ä¸çŸ¥é“ åµŒå¥—æ•°ç»„å¯¹å±‚çº§ å¯ä»¥ä¼ é€’  Infinity
// âš ï¸ flat ç›®å‰è¿˜æ²¡æœ‰è¢« æ‰€æœ‰æµè§ˆå™¨ å…¼å®¹  åŒ…æ‹¬ node ä¸ªåˆ«ç‰ˆæœ¬
```

### å®ç°

**å‡½æ•°ä½œä¸º å‚æ•° ä¼ é€’**

**å‡½æ•°ä½œä¸º è¿”å›å€¼ è¾“å‡º**

- å‚æ•°ä¸ºå‡½æ•°çš„ é«˜é˜¶å‡½æ•°

```js
function too(f) {
  // åˆ¤æ–­å®å‚ï¼Œæ˜¯å¦ä¸º å‡½æ•°
  if (typeof f === "function") {
    f();
  }
}
f(function () {});
```

- è¿”å›å€¼ä¸ºå‡½æ•°çš„ é«˜é˜¶å‡½æ•°

```js
function foo() {
  return function () {};
}
let f = foo();
```

- **é«˜é˜¶å‡½æ•° çš„å®é™…è¿ç”¨**

```js
const callback = (val) => {
  console.log(val);
};
const foo = (val, fn) => {
  if (typeof fn === "function") {
    fn(val);
  }
};
foo("hello", callback);
```

**é«˜é˜¶å‡½æ•° å°±æ˜¯å¯¹åŸºæœ¬å‡½æ•°çš„å†åº¦æŠ½è±¡ï¼Œè™½ç„¶ä¸æ˜¯`Js`çš„ä¸“åˆ©ï¼Œ ä½†ç»å¯¹æ˜¯å¼€å‘æ—¶å€™çš„åˆ©å™¨ã€‚**

> åœ¨ `React` ä¹Ÿæ˜¯å—åˆ°é«˜é˜¶å‡½æ•°çš„å¯å‘ï¼Œæ‰ä¼šæœ‰äº† é«˜é˜¶ç»„ä»¶ çš„æ¦‚å¿µã€‚

## å¸¸ç”¨å‡½æ•°

### `memozition` - ç¼“å­˜å‡½æ•°

ç¼“å­˜å‡½æ•°æ˜¯æŒ‡**å°†ä¸Šæ¬¡å¯¹è®¡ç®—ç»“æœç¼“å­˜èµ·æ¥ï¼Œ å½“ä¸‹æ¬¡è°ƒç”¨çš„æ—¶å€™ï¼Œå¦‚æœé‡åˆ°ç›¸åŒçš„å‚æ•°ï¼Œå°±ç›´æ¥è¿”å›ç¼“å­˜ä¸­çš„æ•°æ®ã€‚**

```js
let add = (a, b) => a + b;
// å‡è®¾ memoize å‡½æ•°å¯ä»¥å®ç°ç¼“å­˜ ğŸ“
let calculate = memoize(add);
calculate(1, 2); // 3
calculate(1, 2); // ç›¸åŒçš„å‚æ•° ç¬¬äºŒæ¬¡è°ƒç”¨æ—¶ï¼Œ ä»ç¼“å­˜ä¸­å–å‡ºæ•°æ® è€Œéé‡æ–°è®¡ç®—ä¸€æ¬¡ã€‚
```

- **å®ç°åŸç†ï¼š ğŸ“ğŸ“ğŸ“**

  **æŠŠå‚æ•°å’Œå¯¹åº”çš„ç»“æœæ•°æ®å­˜åˆ°ä¸€ä¸ªå¯¹è±¡ä¸­ï¼Œè°ƒç”¨æ—¶ï¼Œåˆ¤æ–­å‚æ•°å¯¹åº”çš„æ•°æ®æ˜¯å¦å­˜åœ¨ï¼Œå­˜åœ¨å°±è¿”å›å¯¹åº”çš„ç»“æœæ•°æ®ã€‚**

```js
let memoize = function (func) {
  let cache = {};
  return function (key) {
    if (!cache[key]) {
      cache[key] = func.apply(this, arguments);
    }
    return cache[key];
  };
};
```

**æ”¹è¿›ç‰ˆ**

```js
let memoize = function (func, hasher) {
  // å¤šäº†ä¸€ä¸ª hash
  var memoize = function (key) {
    var cache = memoize.cache;
    // å¦‚æœ ä¼ å…¥ hash å°±ç”¨ hash å‡½æ•°æ¥è®¡ç®—key å¹¶å½“ä½œkey
    var address = "" + (hasher ? hasher.apply(this, arguments) : key);
    if (cache[address]) cache[address] = func.apply(this, arguments);
    return cache[address];
  };
  memoize.cache = {};
  return memoize;
};
```

- **é€‚ç”¨åœºæ™¯**

  - **éœ€è¦å¤§é‡é‡å¤çš„è®¡ç®—ï¼Œæˆ–è€…å¤§é‡è®¡ç®—åˆä¾èµ–äºä¹‹å‰çš„ç»“æœ~**

  - **å¯¹äº è®¡ç®—é‡ è¾ƒå¤§ çš„é€’å½’è°ƒç”¨ï¼Œå¯ä»¥åŠ å¿«é€Ÿåº¦~**

    > å¯ä»¥æ‹¿ æ–æ³¢é‚£å¥‘æ•°åˆ— æ¥æµ‹è¯•ã€‚

### `curry` - æŸ¯é‡ŒåŒ–å‡½æ•°

åœ¨ æ•°å­¦å’Œè®¡ç®—æœºç§‘å­¦ä¸­ï¼Œ**æŸ¯é‡ŒåŒ–æ˜¯ä¸€ç§å°†ä½¿ç”¨å¤šä¸ªå‚æ•°çš„ä¸€ä¸ªå‡½æ•°ï¼Œè½¬æ¢æˆ ä¸€ç³»åˆ—ä½¿ç”¨ ä¸€ä¸ªå‚æ•°çš„å‡½æ•°çš„æŠ€æœ¯ã€‚**

```js
// æ­£å¸¸å‡½æ•°
function girl(name, age, single) {
  return `æˆ‘å«${name}, æˆ‘ä»Šå¹´${age}å²ï¼Œæˆ‘${single}å•èº«`;
}
let lincancan = girl("æ—", 18, "æ˜¯");
console.log(lincancan);

// curry å‡½æ•°
function girl(name) {
  return function (age) {
    return function (single) {
      return `æˆ‘å«${name}, æˆ‘ä»Šå¹´${age}å²ï¼Œæˆ‘${single}å•èº«`;
    };
  };
}
let lin = girl("æ—")(18)("ä¸æ˜¯");
```

- éœ€æ±‚ - **æ£€æµ‹å­—ç¬¦ä¸²ä¸­æ˜¯å¦åŒ…å«ç©ºæ ¼**

```js
// å°è£…å‡½æ•°
let matching = (reg, str) => reg.test(str);
matching(/\s+/g, "hello world"); // true

// æŸ¯é‡ŒåŒ–
let curry = (reg) => {
  return (str) => {
    return reg.test(str);
  };
};
let hasSpace = curry(/\s+/g);
hasSpace("hello world"); // true
```

- éœ€æ±‚ - **è·å–æ•°ç»„å¯¹è±¡ä¸­çš„`age`å±æ€§çš„å€¼**

```js
let person = [
  { name: "1", age: 2 },
  { name: "2", age: 3 },
];
// ä¸ä½¿ç”¨æŸ¯é‡ŒåŒ–
let getAge = person.map((item) => item.age);
console.log(getAge); // [2, 3]

// æŸ¯é‡ŒåŒ– çš„æ¦‚å¿µ å¹³æ—¶ç”¨çš„ä¸å¤šï¼Œè€Œä¸” å®ç°ä¹Ÿæ¯”è¾ƒéš¾ã€‚ç†è§£æ¦‚å¿µã€‚
// Lodash æ˜¯ ä¸€è‡´æ€§/æ¨¡å—åŒ–/é«˜æ€§èƒ½ çš„ Js åº“
// - Lodash é€šè¿‡é™ä½ array number objects string ç­‰ç­‰çš„ä½¿ç”¨éš¾åº¦ä»è€Œè®© js å˜å¾—æ›´ç®€å•ã€‚ğŸ“
const _ = require("lodash");
let getProp = _.curry((key, obj) => {
  // lodash é‡Œé¢çš„ curry
  return obj[key];
});
let ages = person.map(getProp("age"));
console.log(ages); // [2, 3] - getProp å‡½æ•°å¯å¤ç”¨
```

### åå‡½æ•°

**æŸ¯é‡ŒåŒ– æ˜¯å°†ä¸€ä¸ªå¤šå‚å‡½æ•°ï¼Œè½¬æ¢æˆå¤šä¸ªå•å‚æ•°å‡½æ•°ï¼Œä¹Ÿå°±æ˜¯å°†ä¸€ä¸ª `n`å…ƒå‡½æ•°è½¬æ¢æˆ `n`ä¸ª ä¸€å…ƒå‡½æ•°ã€‚** ğŸğŸğŸ

**`f(a, b, c) = f(a)(b)(c);`**

**åå‡½æ•° æ˜¯å›ºå®šä¸€ä¸ªå‡½æ•°çš„ä¸€ä¸ªæˆ–è€…å¤šä¸ªå‚æ•°ï¼Œä¹Ÿå°±æ˜¯å°†ä¸€ä¸ª`n`å…ƒå‡½æ•°è½¬æ¢æˆ `n-x` å…ƒå‡½æ•°ã€‚**ğŸğŸğŸ

**`f(a, b, c) = f(a, b)(c);`**

> å…ƒ - å‡½æ•°ä¸ªæ•°

- **ä½¿ç”¨`bind`å®ç°**

  ```js
  let add = (x, y) => x + y;
  let rst = add.bind(null, 1);
  rst(2); // 3
  ```

## é˜²æŠ– & èŠ‚æµ

### é˜²æŠ–`debounce`

å½“æŒç»­è§¦å‘äº‹ä»¶æ—¶ï¼Œä¸€å®šæ—¶é—´æ®µå†…æ²¡æœ‰å†è§¦å‘äº‹ä»¶ï¼Œäº‹ä»¶å¤„ç†å‡½æ•°æ‰ä¼šæ‰§è¡Œä¸€æ¬¡ï¼Œ**å¦‚æœè®¾å®šçš„æ—¶é—´åˆ°æ¥ä¹‹å‰ï¼Œåˆä¸€æ¬¡è§¦å‘äº†äº‹ä»¶ï¼Œå°±é‡æ–°å¼€å§‹å»¶æ—¶ã€‚**

> **å‰ç«¯å¼€å‘ è¿‡ç¨‹ä¸­ `resize / scroll / mousemove / mousehover` ç­‰ï¼Œ ä¼šè¢«é¢‘ç¹åœ°è§¦å‘ï¼Œä¸åšé™åˆ¶çš„è¯ï¼Œæœ‰å¯èƒ½ä¸€ç§’ä¹‹å†…æ‰§è¡Œå‡ åæ¬¡ã€å‡ ç™¾æ¬¡ã€‚** > **å¦‚æœå‡½æ•°å†…éƒ¨æ‰§è¡Œäº†å…¶ä»–å‡½æ•°ï¼Œå°¤å…¶æ˜¯æ‰§è¡Œæ“ä½œäº† DOM å‡½æ•°ï¼Œé‚£ä¸ä»…ä¼šé€ æˆè®¡ç®—æœºèµ„æºçš„æµªè´¹ï¼Œè¿˜ä¼šé™ä½ç¨‹åºè¿è¡Œé€Ÿåº¦ï¼Œç”šè‡³é€ æˆæµè§ˆå™¨å¡æ­»ï¼Œå´©æºƒã€‚ ğŸ“ğŸ“ğŸ“**
>
> `e.g.` - é‡å¤çš„`ajax`è°ƒç”¨ï¼Œä¸ä»…ä¼šé€ æˆç½‘ç»œé˜»å¡ï¼Œè¿˜ä¼šé€ æˆ æ•°æ®å…³ç³»çš„æ··ä¹±ã€‚

**å‡½æ•°é˜²æŠ– - å…³é”®åœ¨äºï¼Œåœ¨ä¸€ä¸ªåŠ¨ä½œå‘ç”Ÿä¸€å®šæ—¶é—´ä¹‹åï¼Œæ‰æ‰§è¡Œç‰¹å®šäº‹ä»¶ã€‚**

```js
let deBounce = (fn, delay) => {
  let timer = null;
  return function (...args) {
    if (timer) clearTimeout(timer); // è¿›æ¥å°± æ¸…é™¤å®šæ—¶å™¨ï¼Œä¿æŒ æ— é™å»¶åã€‚

    timer = setTimeout(() => {
      // è¿™é‡Œ ç»‘å®š this å¯ä»¥ä½¿ç”¨ function + apply ç»‘å®š
      // ä¹Ÿå¯ä»¥ ä½¿ç”¨ ()=>{} ç›´æ¥ç»‘å®š å½“å‰ this
      fn(...args);
    }, delay);
  };
};
```

### å‡½æ•°èŠ‚æµ`throttle`

å½“æŒç»­è§¦å‘äº‹ä»¶æ—¶ï¼Œä¿è¯ä¸€å®šæ—¶é—´æ®µå†…ï¼Œåªè°ƒç”¨ä¸€æ¬¡äº‹ä»¶å¤„ç†å‡½æ•°ã€‚**å½“æŒç»­è§¦å‘äº‹ä»¶æ—¶ï¼Œä¿è¯ä¸€å®šæ—¶é—´æ®µå†… åªè°ƒç”¨ä¸€æ¬¡äº‹ä»¶å¤„ç†å‡½æ•°ã€‚**

```js
// å®šæ—¶å™¨
let throttle = (fn, delay) => {
  let timer = null;
  return function (...args) {
    if (timer) return; // è¿›æ¥å°± return ä¸è§¦å‘ï¼Œä¿æŒ é¢‘ç‡è§¦å‘ã€‚

    timer = setTimeout(() => {
      // è¿™é‡Œ ç»‘å®š this å¯ä»¥ä½¿ç”¨ function + apply ç»‘å®šï¼Œä¹Ÿå¯ä»¥ ä½¿ç”¨ ()=>{} ç›´æ¥ç»‘å®š å½“å‰ this
      fn(...args);
      clearTimeout(timer);
      timer = null;
    }, delay);
  };
};

// é”lock
let throttle2 = (fn, delay) => {
  let flag = true;
  return function (...args) {
    if (!flag) return;
    flag = false;

    timer = setTimeout(() => {
      // è¿™é‡Œ ç»‘å®š this å¯ä»¥ä½¿ç”¨ function + apply ç»‘å®šï¼Œä¹Ÿå¯ä»¥ ä½¿ç”¨ ()=>{} ç›´æ¥ç»‘å®š å½“å‰ this
      fn(...args);
      flag = true;
    }, delay);
  };
};
```

### é€‚ç”¨åœºæ™¯

- **é˜²æŠ– - `input`è¾“å…¥**
- **èŠ‚æµ - `ajax`è¯·æ±‚**

## æ·±æµ…æ‹·è´

### åŸç†

**ä¼ å€¼ & ä¼ å€(å†…å­˜åœ°å€)** - æ ˆ`stack` å †`heap`

- `stack`é‡Œé¢å­˜äº† **åŸºæœ¬æ•°æ®ç±»å‹çš„`key & value`**
- `stack`é‡Œé¢å­˜äº† **å¼•ç”¨ç±»å‹çš„`key`**ï¼Œ**`heap`é‡Œé¢å­˜äº† å¼•ç”¨ç±»å‹çš„ `value`**

> ä¸¥æ ¼æ¥è®²`V8`é‡Œé¢å­˜çš„éƒ½æ˜¯ å †å†…å­˜ï¼Œ å› ä¸º`V8`å¼•æ“é‡Œé¢ éƒ½æ˜¯å¯¹è±¡ã€‚

- ä¼ å€¼ å°±æ˜¯ **ç›´æ¥æŠŠ å€¼ èµ‹ç»™ å˜é‡~** ğŸ“

  ```js
  let a = 1;
  let b = a;
  b = 12;
  console.log(a, b); // 1 12
  ```

  - æ ˆ é‡Œé¢ å¼€è¾Ÿå†…å­˜ç©ºé—´ï¼Œå­˜æ”¾ 1 ä¹‹åï¼Œå°†å˜é‡ a å’Œ 1 å…³è”èµ·æ¥ã€‚
  - a çš„åˆå§‹å€¼å€¼æ˜¯ undefinedã€‚
  - åˆ›å»º b ç„¶åå°† a çš„å€¼ èµ‹ç»™ bã€‚
  - ç„¶å å­˜å€¼ 12ã€‚ å°† 12 å’Œ b å…³è”èµ·æ¥ã€‚
  - æ‰€ä»¥å°±æ˜¯ 1 å’Œ 12ã€‚

- ä¼ å€ å°±æ˜¯ **ç›´æ¥å°† å†…å­˜åœ°å€ å’Œ å˜é‡ ç›¸å…³è”~** ğŸ“

  ```js
  let obj1 = { a: 10 };
  let obj2 = obj1; // å¤åˆ¶çš„æ˜¯ å¼•ç”¨åœ°å€ã€‚
  obj2.a = 100;
  console.log(obj1, obj2); // { a: 100 } { a: 100 }
  ```

  - åœ¨ å †åŒº å£°æ˜ä¸€ä¸ªå€¼`{ a: 10 }` - åœ°å€æ˜¯ `16è¿›åˆ¶` çš„åœ°å€ (å‡å¦‚æ˜¯) `0X123`
  - åœ¨ æ ˆåŒº å£°æ˜ `å€¼0X123 - å˜é‡ obj1`, å…³è”èµ·æ¥
  - ç„¶å åœ¨ æ ˆåŒº å£°æ˜ `å€¼ 0X123 - å˜é‡ obj2`, å…³è”èµ·æ¥
  - `obj2.a = 100; ` æ”¹å˜ä¹‹åã€‚ å› ä¸ºéƒ½æ˜¯ä¿®æ”¹åŒä¸€å—åœ°å€`0X123` æ‰€ä»¥ `obj1` å°±æ”¹å˜äº†ã€‚

**å¯¹äº åŸå§‹æ•°æ®ç±»å‹ æ¥è¯´ï¼Œæ˜¯æ²¡æœ‰ æ·±æµ…æ‹·è´ çš„åŒºåˆ«ã€‚æ·±æµ…æ‹·è´ éƒ½æ˜¯å¯¹äº å¼•ç”¨æ•°æ® ç±»å‹è€Œè¨€çš„ã€‚**

**å¦‚æœæˆ‘ä»¬è¦ èµ‹å€¼ å¯¹è±¡çš„æ‰€æœ‰å±æ€§ éƒ½ä¸æ˜¯å¼•ç”¨ç±»å‹çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨æµ…æ‹·è´ - éå† å¹¶ èµ‹å€¼ã€‚**

> `obj2.a = obj1.a`

éƒ½æ˜¯åŸºç¡€ç±»å‹çš„è¯ï¼Œ æ‰€ä»¥ å°±éƒ½ ç‹¬ç«‹å»ºç«‹å€¼ã€‚

### é€‚ç”¨åœºæ™¯

**éƒ½æ˜¯å¤æ‚å¯¹è±¡ï¼Œå³å¯¹è±¡çš„å±æ€§è¿˜æ˜¯å¯¹è±¡ã€‚**

**`({ a: 1, b: { b1: 1 } });`**

### æµ…æ‹·è´å®ç°

**åªå¤åˆ¶ä¸€å±‚å¯¹è±¡ï¼Œå½“å¯¹è±¡çš„ å±æ€§ æ˜¯å¼•ç”¨ç±»å‹çš„æ—¶å€™ï¼Œ å®è´¨å¤åˆ¶çš„æ˜¯å…¶å¼•ç”¨ã€‚ğŸ“ğŸ“ğŸ“**

**å½“ å¼•ç”¨å€¼æŒ‡å‘å‘ç”Ÿæ”¹å˜æ—¶ï¼Œä¹Ÿä¼šè·Ÿç€æ”¹å˜**

- **`for...in` + èµ‹å€¼**

  ```js
  let shallowCopy = (obj) => {
    let rst = {};
    for (const key in obj) {
      // hasOwnProperty åªå¤åˆ¶ æœ¬èº«æ‹¥æœ‰çš„å±æ€§ï¼Œ (éç»§æ‰¿è¿‡æ¥çš„å±æ€§) æšä¸¾å±æ€§ã€‚
      if (Object.hasOwnProperty.call(obj, key)) {
        rst[key] = obj[key];
      }
    }
    return rst;
  };
  let start = {
    name: "Gl",
    age: 19,
    friend: {
      name: "Zs",
    },
  };

  let otherStar = shallowCopy(start);
  otherStar.name = "GG";
  otherStar.age = 10;
  otherStar.friend.name = "Hl";
  console.log(start); // { name: 'Gl', age: 19, friend: { name: 'Hl' } }
  // ç¬¬äºŒå±‚ å¯¹è±¡ æ”¹å˜äº†~ğŸ“
  ```

- **`Object.assign();`**

  > **å¯ä»¥å°†`n`ä¸ªæºå¯¹è±¡æ‹·è´åˆ° ç›®æ ‡å¯¹è±¡ä¸­å»ã€‚**
  >
  > **ç¬¬ä¸€çº§åˆ«å±æ€§æ˜¯ æ·±æ‹·è´ï¼Œä»¥åçº§åˆ« æ˜¯æµ…æ‹·è´ã€‚ğŸ“ğŸ“**

  `es6`ä¸­çš„æ–¹æ³•ã€‚ - `Object.assign(Target, ...source)`

  ```js
  let kaixin = { name: "kaixin", info: { hobby: "åƒé¥­ç¡è§‰" } };
  let Gl666 = Object.assign({}, kaixin);
  console.log("Gl666", Gl666); // { name: 'kaixin', info: { bobby: 'åƒé¥­ç¡è§‰' } }
  Gl666.name = "Gl";
  Gl666.info.hobby = "å–çƒ­æ°´";
  console.log("kaixin", kaixin); // { name: 'kaixin', info: { hobby: 'å–çƒ­æ°´' } }
  ```

- **æ‰©å±•è¿ç®—ç¬¦`...`**

  > **ç¬¬ä¸€çº§åˆ«å±æ€§æ˜¯ æ·±æ‹·è´ï¼Œä»¥åçº§åˆ« æ˜¯æµ…æ‹·è´ã€‚ğŸ“ğŸ“**

  ```js
  let c1 = { name: "1" };
  let c2 = { ...c1 };
  c2.name = "2";
  console.log(c1); // { name: '1' }; ä½†æ˜¯ æ·±æµ…æ‹·è´ æ°¸è¿œæ˜¯åŸºäº å¤æ‚å¯¹è±¡ æ¥è¯´çš„ã€‚

  let c3 = { name: { a1: "1" } };
  let c5 = { ...c3 };
  c5.name.a1 = "2";
  console.log(c3); // { name: { a1: '2' } }
  ```

  > **æ‰©å±•è¿ç®—ç¬¦ï¼Œå®ƒçš„`value`æ˜¯åŸå§‹æ•°æ®ç±»å‹çš„æ—¶å€™ï¼Œæ˜¯æ·±æ‹·è´ã€‚ å½“`value`æ˜¯å¼•ç”¨ç±»å‹çš„æ—¶å€™ï¼Œ æ˜¯æµ…æ‹·è´ã€‚**

### æ·±æ‹·è´å®ç°

**æ·±æ‹·è´æ˜¯å¦å¤–ç”³è¯·äº†ä¸€å—å†…å­˜ï¼Œ æ‰€ä»¥åŸå¯¹è±¡å‘ç”Ÿå˜åŒ–çš„æ—¶å€™ï¼Œ æ‹·è´ä¹‹åçš„å˜é‡ä¸ä¼šå‘ç”Ÿæ”¹å˜ã€‚**

- **`JSON.parse(JSON.stringify(obj));`**

  ```js
  let objC1 = { name: "å°æ˜", dog: ["1", "2"] };
  let objC2 = JSON.parse(JSON.stringify(objC1));
  objC2.name = "å°çº¢";
  objC2.dog[0] = "3";
  console.log(objC1, objC2); // { name: 'å°æ˜', dog: [ '1', '2' ] } { name: 'å°çº¢', dog: [ '3', '2' ] }
  ```

  **`JSON`çš„ é—®é¢˜ âš ï¸ æ³¨æ„çš„ç‚¹ã€‚**

  ```js
  let rg = [{ name: "1", car: ["0"], deive: function () {}, age: undefined }];
  let by = JSON.parse(JSON.stringify(rg));
  console.log(by); // [ { name: '1', car: [ '0' ] } ]
  // âš ï¸ deive age éƒ½æ²¡æœ‰è¢« å¤åˆ¶è¿‡æ¥ã€‚
  ```

  **`JSON.stringify` çš„åŸç†å°±æ˜¯ï¼Œèƒ½å¤Ÿ`JSON`åŒ–çš„å€¼ éƒ½` JSON`åŒ–ã€‚ `JSON.parse`å†ç”Ÿæˆä¸€ä¸ª`JSON`å¯¹è±¡ã€‚ğŸ“**

  **`function` `undefined` éƒ½ä¸èƒ½è¢«`JSON`åŒ– æ‰€ä»¥å°±ç»™ ä¸¢æ‰äº†ã€‚ğŸ“**

  **åœ¨å¤„ç† å¾ªç¯å¼•ç”¨ çš„æ—¶å€™ ä¼šè¢«æŠ¥é”™çš„ã€‚ âš ï¸âš ï¸âš ï¸**

  > `JSON.parse(JSON.stringify(obj));` å¯ä»¥ æ·±æ‹·è´ çš„å‰ææ˜¯ **ğŸ“ - çº¯çš„`JSON`æ•°æ®ï¼Œä¸åŒ…å«å¾ªç¯å¼•ç”¨ã€‚**

- **é€’å½’å®ç° æ·±æ‹·è´ã€‚**

  ```js
  let deepClone = (obj) => {
    let newObj = Array.isArray(obj) ? [] : {};
    if (obj && typeof obj === "object") {
      for (const key in obj) {
        if (Object.hasOwnProperty.call(obj, key)) {
          if (obj[key] && typeof obj[key] === "object") {
            newObj[key] = deepClone(obj[key]);
          } else {
            newObj[key] = obj[key];
          }
        }
      }
    }
    return newObj;
  };
  let rg1 = [{ name: "1", car: ["0"], deive: function () {}, age: undefined }];
  let by1 = deepClone(rg1);
  console.log(by1);
  // [
  //   { name: '1', car: [ '0' ], deive: [Function: deive], age: undefined }
  // ]
  ```

### æ‰©å±•

**æ·±æµ…æ‹·è´ çš„ä½¿ç”¨åœºæ™¯ éƒ½æ˜¯å¤æ‚å¯¹è±¡ã€‚ ğŸ“ğŸ“ğŸ“**

- **æ·±æµ…æ‹·è´ çš„ä½¿ç”¨åœºæ™¯ ğŸ“ - æ··åˆæ¨¡å¼ åˆå¹¶/æ‰©å±•æ–¹æ³•~**

  > æ··åˆæ¨¡å¼ - `Mixin` - (`Vue` é‡Œé¢çš„`Mixin`ï¼Œ`jQ`é‡Œé¢çš„`extens`)
  >
  > æ˜¯ä¸€ç§ä¸æ˜¯ç”¨ç»§æ‰¿å°±å¯ä»¥ å¤ç”¨çš„æ¨¡å¼ã€‚

  ```js
  let mixin = {
    say() {
      console.log(`${this.name} åœ¨è¯´è¯`);
    },
    run() {
      console.log(`${this.name} åœ¨è·‘æ­¥`);
    },
  };

  // æ²¡æœ‰ä»»ä½• æ–¹æ³•çš„
  class Student {
    constructor(name) {
      this.name = name;
    }
  }

  // class Person {
  //   ... è¿™é‡Œé¢æœ‰å¾ˆå¤šæ–¹æ³• Student ç»§æ‰¿è¿‡æ¥ æ‰€ä»¥å°± ä¼šæœ‰å¾ˆå¤šæ–¹æ³•
  //   âš ï¸ğŸ· é™¤å»ç»§æ‰¿ è¿˜æœ‰ Mixinçš„ æ·±æµ…æ‹·è´ ä¹Ÿå¯ä»¥ä½¿ç”¨è¿™äº›æ–¹æ³•
  // }
  ```

  **ä¸é€šè¿‡ ç»§æ‰¿ å»æ‰©å±•æ–¹æ³• ğŸ‘‡**

  **`mixin` æŒ‚è½½åˆ°`prototype`ä¸Šé¢, å¦‚æœæŒ‚è½½`class`ä¸Šé¢`new`ä¸€ä¸ª å°±ä¼šæœ‰ ä¸€äº›æ–¹æ³•ï¼Œè¿™æ ·å°±æ¯”è¾ƒå ç”¨å†…å­˜**

  **å®šä¹‰åœ¨ åŸå‹ä¸Š å¯ä»¥é¿å… å†…å­˜çš„é‡å¤å ç”¨ã€‚ ğŸ“ åŸå‹å…±äº«ï¼ï¼ï¼ğŸ“**

  ```js
  Object.assign(Student.prototype, mixin);
  let s = new Student("ç‹äºŒ");
  s.run(); // ç‹äºŒ åœ¨è·‘æ­¥
  ```

  **`Vue`é‡Œé¢ ä¹Ÿæœ‰ã€‚ æ··å…¥æ¨¡å¼`Vue.mixin();` å¯ä»¥é‡å¤ å®šä¹‰æ–¹æ³•å’Œ dataï¼Œéƒ½æŒ‚è½½åœ¨`Vue`å®ä¾‹çš„`prototype`ä¸Šäº†~**

- **æ·±æµ…æ‹·è´ çš„ä½¿ç”¨åœºæ™¯ ğŸ“ - `pick`**

  ```js
  const _ = require("underscore");

  let obj = {
    name: "å¼€å¿ƒ",
    age: 30,
  };

  // è¿”å›äº† ä¸€ä¸ª obj çš„å‰¯æœ¬
  let age = _.pick(obj, "age");
  console.log(age); // { age: 30 };
  console.log(obj); // { name: 'å¼€å¿ƒ', age: 30 };
  // - åŸå…ˆ obj çš„ æ•°æ®æ¨¡å¼ä¹Ÿ æ²¡æœ‰æ”¹å˜~
  ```

  **æ¨¡æ‹Ÿ`underscore`**

  ```js
  (function () {
    // åŸºç¡€æ¶æ„ å·²ç»å·®ä¸å¤š
    var root = this;
    var _ = {};
    root._ = _;

    // åœ¨è¿™é‡Œå®šä¹‰è‡ªå·±çš„æ–¹æ³•
    _.reverse = (string) => {
      return string.split("").reverse().join("");
    };
  })();

  let a = _.reverse("hello");
  console.log(a); // olleh
  ```
