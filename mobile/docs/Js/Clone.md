# `Js_Base` - æ·±æµ…æ‹·è´

> æµ…æ‹·è´çš„æ„æ€å°±æ˜¯åªå¤åˆ¶å¼•ç”¨ï¼Œè€Œæœªå¤åˆ¶çœŸæ­£çš„å€¼ã€‚
>
> æ·±æ‹·è´å°±æ˜¯å¯¹ç›®æ ‡çš„å®Œå…¨æ‹·è´ï¼Œä¼šåˆ›å»ºä¸€ä¸ªä¸€æ‘¸ä¸€æ ·çš„å¯¹è±¡ï¼Œå„è‡ªå¼•ç”¨å„è‡ªå­˜å‚¨ã€‚

## æ¦‚å¿µ

- **æµ…æ‹·è´åªæ˜¯æ‹·è´å¯¹è±¡çš„å¼•ç”¨åœ°å€ï¼Œä¸æ‹·è´å¯¹è±¡æœ¬èº«ã€‚**
  - **æ–°æ—§å¯¹è±¡è¿˜æ˜¯ å…±ç”¨ ä¸€å—å†…å­˜ã€‚**
- **æ·±æ‹·è´ä¼šåˆ›å»ºä¸€ä¸ªä¸€æ‘¸ä¸€æ ·çš„å¯¹è±¡ï¼Œå„è‡ªå¼•ç”¨å„è‡ªå­˜å‚¨ã€‚**
- **æ·±æµ…æ‹·è´çš„æ¦‚å¿µåªå­˜åœ¨ä¸ å¼•ç”¨æ•°æ®ç±»å‹ï¼ˆå¤æ‚æ•°æ®ç±»å‹ï¼‰ä¸­**
- **åŸºæœ¬æ•°æ®ç±»å‹ï¼ˆç®€å•æ•°æ®ç±»å‹ï¼‰**
  **`Number` - `Boolean` - `String` - `Undefined` - `Null` - `Symbol (ES6æ–°å¢)`**
- **å¼•ç”¨æ•°æ®ç±»å‹ ï¼ˆå¤æ‚æ•°æ®ç±»å‹ï¼‰**
  **`Object` - `Array` - `Function` - `RegExp` - `Date`ç­‰**

## ç†è§£

1. ```js
   // e.g - 1
   let b = 10,
     a = b;
   b = 20;
   console.log(a); // 10
   // è¿™ä¸ªæ˜¯ä»€ä¹ˆæ‹·è´å‘¢ï¼Ÿ
   ```

   ä¸Šé¢çš„ä¾‹å­ï¼Œå…¶å®ä¸å­˜åœ¨æ‹·è´ã€‚

   **åªæ˜¯åŸºæœ¬æ•°æ®ç±»å‹çš„ä¸€ä¸ªç®€å•çš„èµ‹å€¼æ“ä½œ**

2. ```js
   // e.g - 2
   let obj = { a: 20 };
   let obj2 = obj;
   obj2.a = 10;
   console.log(obj.a); // 10
   // é‚£ä¹ˆè¿™ä¸ªæ˜¯ä»€ä¹ˆæ‹·è´å‘¢ï¼Ÿ
   ```

   ç­”ï¼š **æµ…æ‹·è´**
   **å› ä¸ºä¸Šé¢æ‹·è´å¯¹è±¡çš„å€¼ä¿®æ”¹å¹¶æŠŠåŸå¯¹è±¡çš„å€¼ä¹Ÿä¿®æ”¹äº†ã€‚**

### æ·±æµ…æ‹·è´

- **åŸºæœ¬æ•°æ®ç±»å‹çš„å­˜æ”¾æ—¶ç‹¬ç«‹å­˜æ”¾åœ¨ `æ ˆï¼ˆstackï¼‰`ä¸­çš„æ•°æ®ã€‚**

  åœ¨ `e.g - 1` ä¸­ï¼Œ`b`èµ‹å€¼ç»™ `a`ï¼Œ`a`åˆé‡æ–°å¼€è¾Ÿäº†ä¸€ä»½å†…å­˜ç©ºé—´ã€‚ä»–ä»¬ä¸¤ä¸ªäº’ä¸å¹²æ‰°ï¼Œæ‰€ä»¥ `b` é‡æ–°èµ‹å€¼ï¼Œ `a` çš„å€¼ä¸ä¼šæ”¹å˜ã€‚

  (**åŸºæœ¬æ•°æ®ç±»å‹éƒ½æ˜¯ç‹¬ç«‹å­˜å‚¨çš„**)ã€‚

- **å¼•ç”¨æ•°æ®ç±»å‹çš„æ•°æ®å­˜æ”¾ä¸€èˆ¬éƒ½æ˜¯åœ¨ `å †å†…å­˜` é‡Œé¢ã€‚**

  ```js
  let obj = {
    // æ˜¯åœ¨å †å†…å­˜é‡Œé¢å¼€è¾Ÿäº†ä¸€å—ç©ºé—´ï¼Œè¿™å—ç©ºé—´å‘½åä¸º data
    a: 20,
  };
  ```

  åœ¨ `e.g - 2` ä¸­ï¼Œ å£°æ˜äº† `obj` ï¼Œ**å°†å­˜æ”¾åœ°å€æ”¾å…¥äº† æ ˆå†…å­˜ ä¸­ï¼Œå°†æ•°æ®æ”¾å…¥äº† å †å†…å­˜ ä¸­**ã€‚

  å£°æ˜ `obj2` å°† `obj` çš„å¼•ç”¨åœ°å€å¤åˆ¶äº†ä¸€ä»½ç»™ `obj2` ï¼Œè¿™æ—¶ä»–ä»¬å°±æŒ‡å‘äº†åŒä¸€å— æ•°æ®å­˜æ”¾çš„åœ°å€ã€‚ æ‰€ä»¥ `obj2.a = 10` ä¹‹åï¼ŒåŸæ¥ `obj` çš„å€¼ä¹Ÿå°±è·Ÿç€æ”¹å˜äº†ã€‚

### å»¶ä¼¸

```js
// e.g - 2.2
let data = {
  n: 10,
  m: data.n * 5,
};
console.log(data.m);
// è¿™ä¸ªæ—¶å€™æ‰“å°ä»€ä¹ˆå‘¢ï¼Ÿ
```

ç­”ï¼š **å¼•ç”¨é”™è¯¯ - `ReferenceError`ã€‚**

å› ä¸º **æ— æ³•åœ¨æ•°æ®åˆå§‹åŒ–ä¹‹å‰è®¿é—®æ•°æ®**ã€‚ä¸Šé¢çš„ `data.n * 5` æ˜¯å†…å­˜ä¿¡æ¯è¿˜æ²¡æœ‰å­˜å‚¨å®Œæˆï¼Œ`data.n` æ˜¯ä¸ª `undefined`ã€‚

**è§£å†³åŠæ³•ï¼š `data.m = data.n * 5;` å£°æ˜ä¹‹åï¼Œå»å®šä¹‰æ˜¯å¯ä»¥çš„ã€‚**

## `Object.assign()`

**`Object.assign()` å¯ä»¥å®ç° æ·±æµ…æ‹·è´ä¸¤ç§ã€‚å–å†³äºæ€ä¹ˆä½¿ç”¨ã€‚**

**`Object.assign()` å¯ä»¥å°†æ‰€æœ‰çš„å¯æšä¸¾ï¼ˆ`enum`ï¼‰å±æ€§çš„å€¼æˆ–è€…å¤šä¸ªæºå¯¹è±¡å¤åˆ¶åˆ°ç›®æ ‡å¯¹è±¡ä¸Šã€‚è¿”å›çš„æ˜¯ç›®æ ‡å¯¹è±¡ã€‚**

```js
const target = { a: 1, b: 2 };
const source = { a: 3, c: 5 };

const result = Object.assign(target, source);

console.log(target); // {a: 3, b: 2, c: 5}; --- ç›®æ ‡å¯¹è±¡ä¹Ÿä¼šæ”¹å˜ï¼Œæºå¯¹è±¡ä¼šè¦†ç›–ç›®æ ‡å¯¹è±¡é‡Œç›¸åŒçš„é”®
console.log(result); // {a: 3, b: 2, c: 5}; --- è¿”å›çš„ç›®æ ‡ï¼Œæ‹·è´åçš„ç›®æ ‡å¯¹è±¡
```

## æµ…æ‹·è´çš„å®ç°æ–¹æ³•

### **`Object.assign()`**

ä½¿ç”¨ `Object.assign()` è¿›è¡Œæ‹·è´ã€‚å¦‚æœæ‹·è´çš„æ˜¯å¯¹è±¡å±æ€§çš„å¼•ç”¨ï¼Œä¸æ˜¯å¯¹è±¡æœ¬èº«ã€‚è¿™æ ·å¯ä»¥å®ç° **æµ…æ‹·è´**ã€‚

```js
const obj1 = { a: { a: 12, b: 21 } };
let obj2 = Object.assign({}, obj1); // ç©ºå¯¹è±¡æ‹·è´å¦å¤–ä¸€ä¸ªå¯¹è±¡çš„å±æ€§
obj2.a.a = "123";
console.log(obj1.a.a); // â€™123â€˜ å› ä¸ºæ‹·è´çš„æ˜¯å¯¹è±¡å±æ€§ï¼Œæ‰€ä»¥åªæ‹·è´äº†å¼•ç”¨ã€‚
```

### æ‹·è´å¯¹è±¡çš„æŒ‡é’ˆ(å­˜æ”¾åœ°å€) å¯ä»¥åšåˆ°æµ…æ‹·è´çš„æ•ˆæœã€‚

```js
let obj2 = (obj1 = { a: 1, b: 2 });
obj1.a = 3;
console.log(obj1); // {a: 3, b: 2}
console.log(obj2); // {a: 3, b: 2}
```

## æ·±æ‹·è´çš„å®ç°æ–¹æ³•

### `Object.assign()` - åªèƒ½å®ç°ä¸€ç»´å¯¹è±¡çš„æ·±æ‹·è´ã€‚

```js
const a = { a: 1, b: 2, c: 3 };
let b = Object.assign({}, a);
a.a = 3;
console.log(a); // {a: 3, b: 2, c: 3}
console.log(b); // {a: 1, b: 2, c: 3}
```

### **`JSON.parse(JSON. stringify())`**

**å¯ä»¥å®ç°å¤šç»´å¯¹è±¡çš„æ·±æ‹·è´ã€‚ä½†ä¼šå¿½ç•¥ `undefined` `Symbolå€¼` `ä»»æ„å‡½æ•°`** ğŸ“ğŸ“ğŸ“

```js
const obj1 = {
  a: 1,
  b: { m: 1 },
  c: undefined,
  d: function (x, y) {
    return x + y;
  },
  e: Symbol("foo"),
  f: null,
};
let obj2 = JSON.parse(JSON.stringify(obj1));
console.log(obj1); // { a: 1, b: {m: 1}, c: undefined, d: Æ’, e: Symbol(foo), f: null }
console.log(obj2); // { a: 1, b: {m: 1}, f: null }
obj2.b.m = 2; // ä¿®æ”¹ obj2.b.m çš„å€¼
console.log(obj1); // { a: 1, b: {m: 1}, c: undefined, d: Æ’, e: Symbol(foo), f: null }
console.log(obj2); // { a: 1, b: {m: 2}, f: null }
```

### é€’å½’æ‹·è´

```js
function deepClone(obj) {
  let objClone = Array.isArray(obj) ? [] : {};
  if (obj && typeof obj === "object") {
    for (let key in obj) {
      if (obj.hasOwnProperty(key)) {
        // hasOwnProperty æ–¹æ³•ä¼šè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼ŒæŒ‡ç¤ºå¯¹è±¡è‡ªèº«å±æ€§ä¸­æ˜¯å¦å…·æœ‰æŒ‡å®šçš„å±æ€§ï¼ˆä¹Ÿå°±æ˜¯ï¼Œæ˜¯å¦æœ‰æŒ‡å®šçš„é”®ï¼‰ã€‚
        // å’Œ in è¿ç®—ç¬¦ä¸åŒï¼Œè¯¥æ–¹æ³•ä¼šå¿½ç•¥æ‰é‚£äº›ä»åŸå‹é“¾ä¸Šç»§æ‰¿åˆ°çš„å±æ€§ã€‚
        // å³ä½¿å±æ€§çš„å€¼æ˜¯ null æˆ– undefinedï¼Œåªè¦å±æ€§å­˜åœ¨ï¼ŒhasOwnProperty ä¾æ—§ä¼šè¿”å› trueã€‚
        if (obj[key] && typeof obj[key] === "object") {
          objClone[key] = deepClone(obj[key]);
        } else {
          objClone[key] = obj[key];
        }
      }
    }
  }
  return objClone;
}

let a = [0, 1, 2, 3],
  b = deepClone(a);
a[0] = 666;
console.log(a, b);
// (4)Â [666, 1, 2, 3] (4)Â [0, 1, 2, 3]
```

> åªæ˜¯ä¸€ä¸ªç®€å•çš„å®ç°ã€‚ä¾‹å¦‚ `åŸå‹é“¾` `åŸºæœ¬æ•°æ®ç±»å‹` ç­‰ç­‰éƒ½è¿˜æ²¡è€ƒè™‘ã€‚

### `Object.create()`

**å¯ä»¥ä½¿ç”¨ `let newObj = Object.create(oldObj)` å¯ä»¥è¾¾åˆ°æ·±æ‹·è´çš„æ•ˆæœ**

```js
const a = Object.create(new Array()); // å¯ä»¥æ‹·è´æ•°ç»„å¯¹è±¡çš„è‡ªå¸¦æ–¹æ³•ã€‚
// ... å¯ä»¥ éå† åŸºäºåŸå‹é“¾æ–¹æ³• çš„ä¸€äº›æ‰©å±•ã€‚
```

### `Array` çš„ä¸€äº›æ–¹æ³•

**`slice` `concat` `Array.from()` `...æ“ä½œç¬¦` ~ å¯ä»¥å®ç°å¯¹ ä¸€ç»´æ•°ç»„ çš„æ·±æ‹·è´**

```js
let arr1 = [1, 2, [3, 4]],
  arr2 = arr1.slice();
console.log(arr1); // [1, 2, [3, 4]]
console.log(arr2); // [1, 2, [3, 4]]
arr2[0] = 2;
arr2[2][1] = 5;
console.log(arr1); // [1, 2, [3, 5]]
console.log(arr2); // [2, 2, [3, 5]]
```

## æ‰©å±•

```js
let a = { n: 1 },
  b = a;
a.x = a = { n: 2 };
console.log("a", a); // a { n: 2 }
console.log("b", b); // b { n: 1, x: { n: 2 } }
// å¯¹è±¡æ˜¯å¼•ç”¨ç±»å‹ æ‰€æœ‰çš„å¯¹è±¡èµ‹å€¼å…¶å®æ˜¯ç»™äº†ä»–è¿™ä¸ªå¯¹è±¡çš„å¼•ç”¨åœ°å€
// a.x è¿™é‡Œæ¶‰åŠåˆ°ä¸€ä¸ªè¿ç®—ç¬¦ä¼˜å…ˆçº§çš„é—®é¢˜ . çš„ä¼˜å…ˆçº§æ˜¯æ¯”è¾ƒé«˜çš„, ä¼šå…ˆæ‰§è¡Œ
```
